#!/bin/bash

# __author__ = Firas S Midani
# __email__ = midani@bcm.edu

# Midani et al. (2020) Figure 3 and Supp. Figure 5 uses data generated by this script 

# load amiga source environment
source $1

# create variable for the absolute file path to amiga.py
amiga=$2

# each growth curve modelled individually 
python $amiga/amiga.py fit \
	-i $amiga/examples/manuscript/death -o split \
	-s 'Substrate:Glucose,Fructose,Water;Ribotype:RT001,RT027,RT053,RT078' \
	-tss 1 --save-gp-data --verbose

# replicates pooled then modeled jointly
python $amiga/amiga.py fit \
	-i $amiga/examples/manuscript/death -o pooled \
	-s 'Substrate:Glucose,Fructose,Water;Ribotype:RT001,RT027,RT053,RT078' \
	--pool-by 'Ribotype,Substrate,Concentration' \
	--sample-posterior -tss 1 --save-gp-data --verbose

# pooled with measurement noise empirically estimated
python $amiga/amiga.py fit \
	-i $amiga/examples/manuscript/death -o pooled_fixed_noise \
	-s 'Substrate:Fructose;Ribotype:RT027,RT053' \
	--pool-by 'Ribotype,Substrate,Concentration' \
	--sample-posterior --fix-noise -tss 1 --save-gp-data --verbose
